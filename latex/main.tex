\documentclass{article}
\usepackage[utf8]{inputenc}

\title{Part 1 - Author Interest Diversity}
\author{Ella Guest}
\date{February 2019}

\usepackage{natbib}
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{xcolor}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{amsmath}
\usepackage{lscape} 


\begin{document}

\maketitle

\tableofcontents

\listoffigures
 
\listoftables

\section{Methodology Overview}
\begin{itemize}
    \item understand how subreddit communities vary in the extent to which they engage with a diverse range of subreddits
    \item most measures in this section are performed at the author-level, and then aggregated by subreddit
\end{itemize}


\subsection{How does interest diversity vary between subreddits }
For each author I will calculate the number of subreddits they commented in and b) the comment entropy. The subreddit count will give a general idea of author activity on Reddit. The comment entropy will give a better understanding of how equally authors divide their contributions across the subreddits they frequent.


\subsection{How do ‘chamber’ members concentrate within the chamber?}

The literature on echo chamber suggests that confirmation bias encourages people to enter and maintain echo chambers, as we experience pleasure from having our opinions re-affirmed by a group. To test this hypothesis I will determine whether authors who choose to comment in the case study echo chamber spend relatively more time within the chamber than authors in other subreddits. This research question has two sub questions.

\subsubsection{Do chamber members spend more time within the chamber than members of other communities?}

To test this I will measure the in-subreddit ratio for each author, for each subreddit they comment in. The in-subreddit ratio is the number of comments made within the subreddit as a fraction of the total number of comments the author made.

\subsubsection{How does author activity vary within subreddits}

The literature suggests that the majority of participation in online communities is heavily unequal. I seek to determine whether this phenomenon hold for echo chambers. I suggest two two possible scenarios: a) chambers are more unequal as they have a more active core of devoted members, or, conversely b) they are more equal as their members are generally equally devoted. I do not yet have a working hypothesis based on the literature on which direction echo chamber participation should be theorised to lean, though my intuition is A.

To measure participation inequality I will first use the same entropy measure from 1.1. This subreddit author entropy will look at the range in number of comments made by all authors. I will then use a more traditional measure of participation inequality, though I have not yet determined which. Options include the gini coefficient and the Pareto principle but I need to do a small literature review to determine which measure has been most appropriately and successfully used for online communities.


\subsection{Diversity Measures} \label{subreddit vector}
For each subreddit $s_i$ there are $n$ comment authors. For the $nth$ author in subreddit $s_i$ there are $x_n$ number of comments, such that for each subreddit we have the vector:

$$s_i = [x_1, x_2, \cdots x_n]$$

I then use this vector to calculate each of the diversity measures (entropy, blau, gini).


\subsubsection{Entropy} \label{entropy}

"Information entropy is the average rate at which information is produced by a stochastic source of data." The lower the probability of a value, the greater the "information" it carries. The higher the entropy, the greater the disorder or uncertainty.

Within the context of subreddits, if an author only makes a few comments in the subreddit, any new content they bring to subreddit provides relatively more information... Therefore the higher a subreddit's entropy the greater the diversity...


$$Entropy = -\sum p_ilog(p_i)$$

where $p_i$ is the probability of value $x_i$;

$$p_i = \frac{x_i}{\sum x}$$

The maximum entropy for a subreddit is $log(n)$ thus be can normalise entropy as:

$$Entropy_{norm} = \frac{Entropy}{log(n)}$$

\subsubsection{Blau index} \label{blau index}

The Blau index is also known as the Gini-Simpson index, or the Gibbs-Martin index. The Blau index of diversity has a range of 0 to 1, where 0 means the population is perfectly homogeneous, and 1 means the population if perfectly heterogeneous. Therefore the higher the a subreddit's blau, the more heterogeneous the distribution of comments amongst authors, the greater the diversity.


\textcolor{red}{Need to look into using 'true diversity' or normalised blau - may be more informative for more active subreddits (and more correlated to entropy). Can the "effective number of types" show a diversity threshold?}

$$Blau = 1 - \sum (\frac{x_i}{\sum x_n})^{2}$$

\subsubsection{Gini coefficient} \label{gini}

The gini coefficient is a measure of inequality in a distribution. It is a ratio between the values of 0 and 1, where 0 means perfect equality and 1 means perfect inequality. Therefore the higher the value of gini for a given subreddit, the more unequally comments are distributed across authors within the subreddit.

$$Gini = \frac{1}{n}(n+1-2\frac{\sum(n+1-i)y_i}{\sum y_i})$$





\section{General Diversity Trends} \label{1.1}

The example findings are from February 2018, until I re-run the rest of 2018. In February 2018 86,467,179 comments were made across 104,042 subreddits by 4,282,601 authors. At least 6.1\% of comments were later deleted (N=5,317,239).

Table \ref{table/all} shows that at least half of subreddits had 3 or fewer unique comment authors in February 2018, and 4 or fewer comments. For both count measures the upper quartile is still smaller that the maximum values. I therefore decided to subset the top decile of subreddits by author count as active communities.


\subsection{Default Subreddits}
50 subreddits were at one time classified as a default. Any new redditor was automatically subscribed to the default subreddits. Reddit used default subreddits until May 2017, but those subreddits appear to still benefit in size from their former visibility.

Figure \ref{hists/active} and Table \ref{table/all} show that authors and comments are very unevenly distributed on Reddit, with the majority of subreddits having fewer than 13 and 26 authors and comments. respectively in the February 2018.

Of the 20 subreddits with more than 60,000 authors 14 are default subreddits. However, of the 16 subreddits with more than 500,000 comments only 7 are defaults. In order to run the analysis, I was to remove inactive subreddits from the sample. Given the substantial difference between the most highly active, subreddits on the top end, and the low upper quartile values, I decide to subset the top decile of subreddits by author count. The analysed subset therefore consists of 10,404 of the original 104,042 subreddits.


\subsection{Subsetting Active Subreddits}
Table \ref{table/all} shows that at least half of subreddits had 3 or fewer unique comment authors in February 2018, and 4 or fewer comments. Both size measures are very highly skewed. I therefore decided to subset the top decile of subreddits by author count as 'active subreddits'.

Either one or both of \textit{author\_count} and \textit{comment\_count} could be used as a proxy for level of subreddit activity. In the full dataset the counts have a very strong positive correlation (coef = 0.899). 


\subsection{Findings}

As shown in Table \ref{table/active}, the lower quartile for \textit{blau} is 0.98. 90\% of the subsetted subreddits have a blau value greater than or equal to 0.96.  Thus, \textit{blau} does not appear to be an informative measure for general trends in active subreddits. However it may still be of use to look into the lower extremes for \textit{blau}. Table \ref{table/active} shows \textit{blau} has a minimum value of 0.078. This outlier way provide insight.

\textcolor{red}{Refer to \ref{blau index} to determine whether the blau index should be normalised.}

Figure \ref{hists/active} shows the distributions for \textit{normalised entropy} and \textit{gini}. Both are normally distributed. Table \ref{table/active} shows that \textit{entropy\_norm} has quartiles Q1 = 0.846, Q2 = 0.883, Q3 = 0.914 and mean 0.873. An average normalised entropy for active subreddits it ~0.87/8. Section \ref{entropy} showed that the higher a subreddit's entropy, the greater it's diversity. As normalised entropy has an upper limit of 1, the average of 0.8 shows that most subreddits have high diversity in terms of the range of authors commenting in the subreddit.

The same table shows that \textit{blau} has quartiles Q1 = 0.363, Q2 = 0.455, Q3 = 0.547 and mean 0.458. An average \textit{gini} for active subreddits it ~0.45. Section \ref{gini} showed that a gini coefficient of 0 means perfect equality, and 1 means perfect inequality. An average of 0.45 therefore suggests that active subreddits tend to have a mid-level of equality.

Table \ref{table/corr:active} shows the correlations between variables. Normalised entropy and gini have a Pearson correlation coefficient of 0.771 and a Spearman's rank correlation coefficient of 0.898. The measures of diversity are highly positively correlated. It may be of interest to determine the for which subreddits they are not highly correlated, and why. This would help understand the relationship between the measures and how to interpret their different magnitudes. Active subreddits are highly diverse, as measured by entropy but neither inequal or equal, as measured by gini.


\section{Author Concentration}

Similar to as we saw in Section \ref{subreddit vector}, for each author $a_i$ there are $n$ number of subreddits they commented in. For the $nth$ subreddit author $a_i$ there are $x_n$ number of comments, such that for each author we have the vector:

$$a_i = [x_1, x_2, \cdots x_n]$$

I then use this vector to calculate the three diversity measures as described in Sections \ref{entropy}, \ref{blau index}, and \ref{gini}. For each author we have the following measures:

\begin{itemize}
    \item number of subreddits
    \item number of comments
    \item author comment entropy
    \item author comment gini
    \item author comment blau
\end{itemize}


\subsection{General Trends}
Again focusing on active subreddits - what are the stats for these values of the author level?




\subsection{Author In-subreddit Ratio}
I also calculate the author in-subreddit ratio for each author, for each subreddit they commented in.
For author $A$ and subreddit $S$, if $x_S$ is the number of comments $A$ made in $S$ and $\sum A_i$ is the number of comments $A$ made across all subreddits, the author in-subreddit ratio is:

$$insub_A{}_S = \frac{x_s}{\sum A_i}$$

\subsection{Aggregating to Subreddit Level}
Section \ref{1.1} characterised subreddits by how authors behaved within subreddits. By now focusing on author activity across subreddits, we can look at how subreddits consists of authors who actor outside of their own space...

By aggregating author statistics to the subreddit level we can determine in certain subreddits tend to attract/consist of authors who are more or less diverse across the entire Reddit platform. For each subreddit I take the median value of each value across all authors who commented in that subreddit. For example, if 500 authors commented in r/ExampleSubreddit, I would take the median value of comment entropy for those 500 authors. I then repeat this for all variables, for all subreddits.

Table \ref{table/author-medians:all} shows the results for all subreddits. Again the count values are highly skewed across subreddits. The lower 75\% of subreddits have an average author subreddit count of 14.5 or less, and an average author comment count of 58 or less. However the maximum values are 7,996 and 1,245,236, respectively. 433 subreddits have these values because all were only commented in by 1 redditor, \textit{imguralbumbot}, a known bot account. Therefore, I again selected the top decile of subreddits by author count for further analysis.

Table \ref{table/author-medians:active} shows the results for the top decile of active subreddits. 






\section{Political Case Studies}

% table of actual values
% table of value ranks
% how do they vary from the general trends?

\subsection{Interpretation}




% Tables
\input{latex/table/all.tex}
\input{latex/table/defaults.tex}
\input{latex/table/active.tex}
\input{latex/table/corr:active.tex}
\input{latex/table/author-medians:all.tex}
\input{latex/table/author-medians:active.tex}



% Subreddit-Level Figures
\input{latex/figures-sub.tex}

% Author-Level Figures
\input{latex/figures-aut.tex}


% Political Visuals
\begin{figure}
    \centering
    \includegraphics[width=\textwidth]{latex/pol-cluster.pdf}
    \caption{Variable Clustermap for Political Subreddits}
    \label{pol-cluster}
\end{figure}

\begin{landscape}
\input{latex/table/pol.tex}
\input{latex/table/pol:pct.tex}
\end{landscape}


\section{Proposed Robustness Checks}

\subsection{Change Subset Threshold}

Compare results to those for the top 5\% or top 20\& of authors?

\subsection{Longitudinal Variation}

Show stability of variables over time

\subsection{Subsetting by Comment Count}

Re-run analysis on another month


\end{document}
